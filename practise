Which is better
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Professional Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { background: #070b14; color: white; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .step-hidden { display: none; }
        .premium-gradient { background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); }
        
        #cv-canvas.tpl-modern { border-top: 12px solid #3b82f6; }
        #cv-canvas.tpl-tech { display: flex; padding: 0; }
        #cv-canvas.tpl-tech .sidebar { width: 35%; background: #1e293b; color: white; padding: 40px 20px; }
        #cv-canvas.tpl-tech .main-content { width: 65%; padding: 40px; }
        #cv-canvas.tpl-minimal { font-family: 'Georgia', serif; padding: 60px; text-align: center; }

        .preview-card { cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .preview-card:hover { transform: translateY(-5px); }
        .preview-card.selected { border: 3px solid #3b82f6; box-shadow: 0 0 25px rgba(59, 130, 246, 0.3); }
    </style>
</head>
<body class="antialiased">

    <div id="loader" class="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 mb-4"></div>
        <p class="text-xs font-bold tracking-widest text-slate-500 uppercase">Verifying Session...</p>
    </div>

    <section id="paymentStep" class="step-hidden min-h-screen flex items-center justify-center p-6">
        <div class="glass max-w-md w-full p-10 rounded-[2.5rem] text-center shadow-2xl">
            <div class="w-20 h-20 premium-gradient rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-blue-500/30">
                <i class="fas fa-crown text-3xl text-white"></i>
            </div>
            <h2 class="text-2xl font-black mb-3">Professional Pass</h2>
            <p class="text-slate-400 text-sm mb-8 leading-relaxed">Pay <span class="text-white font-bold">R50.00</span> to unlock 30 days of Unlimited Access to the AI Builder and Templates.</p>
            <button onclick="window.payNow()" class="w-full py-5 premium-gradient rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:scale-[1.02] transition-transform">
                Confirm & Pay R50
            </button>
        </div>
    </section>

    <section id="templateStep" class="step-hidden max-w-6xl mx-auto py-20 px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-black mb-4 tracking-tighter">Choose Your <span class="text-blue-500">Architecture</span></h2>
            <p class="text-slate-400">Select a structure that matches your industry. All are ATS-optimized.</p>
        </div>
        <div class="grid md:grid-cols-3 gap-10">
            <div onclick="selectTemplate('modern')" class="preview-card glass p-4 rounded-[2rem]" id="t-modern">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden border-t-[10px] border-blue-600">
                    <div class="p-4 space-y-2"><div class="h-4 w-1/2 bg-slate-200"></div><div class="h-2 w-full bg-slate-100"></div></div>
                </div>
                <h3 class="font-bold text-center">Modern Executive</h3>
            </div>
            <div onclick="selectTemplate('tech')" class="preview-card glass p-4 rounded-[2rem]" id="t-tech">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex">
                    <div class="w-1/3 h-full bg-slate-800"></div>
                    <div class="w-2/3 p-4"></div>
                </div>
                <h3 class="font-bold text-center">Tech Impact</h3>
            </div>
            <div onclick="selectTemplate('minimal')" class="preview-card glass p-4 rounded-[2rem]" id="t-minimal">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex flex-col items-center justify-center">
                    <div class="h-4 w-1/3 bg-slate-200 mb-2"></div>
                    <div class="h-2 w-1/2 bg-slate-100"></div>
                </div>
                <h3 class="font-bold text-center">Swiss Minimalist</h3>
            </div>
        </div>
        <div class="flex justify-center mt-12">
            <button onclick="goToEditor()" id="nextBtn" class="hidden px-12 py-5 premium-gradient rounded-full font-black uppercase tracking-widest text-xs shadow-lg shadow-purple-500/20">Initialize Builder</button>
        </div>
    </section>

    <section id="editorStep" class="step-hidden max-w-[1400px] mx-auto py-10 px-6">
        <div class="grid lg:grid-cols-2 gap-12">
            <div class="glass p-8 rounded-[2.5rem] space-y-6 h-fit sticky top-10">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-black uppercase tracking-widest text-blue-500 text-sm">Professional Profile</h3>
                    <span class="text-[10px] bg-white/5 px-3 py-1 rounded-full text-slate-400">Step 2 of 3</span>
                </div>
                <input type="text" id="fName" placeholder="Full Name" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <input type="text" id="fRole" placeholder="Target Professional Title" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="fEmail" placeholder="Email Address" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                    <input type="text" id="fPhone" placeholder="Phone Number" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                </div>
                <textarea id="fSummary" placeholder="Professional Summary..." class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 h-40 outline-none focus:border-blue-500"></textarea>
                
                <button onclick="generateAndAskCover()" class="w-full py-5 premium-gradient text-white rounded-2xl font-black uppercase tracking-[0.2em] text-xs shadow-xl">
                    Generate CV & Continue
                </button>
            </div>

            <div class="flex flex-col items-center">
                <div id="cv-canvas" class="bg-white text-slate-900 w-[595px] min-h-[842px] shadow-[0_0_50px_rgba(0,0,0,0.5)] p-12 overflow-hidden transition-all">
                    <div id="cv-content">
                        <h1 id="pName" class="text-4xl font-black uppercase leading-none mb-2">Full Name</h1>
                        <p id="pRole" class="text-blue-600 font-bold uppercase tracking-widest text-xs mb-6">Target Professional Title</p>
                        <div class="flex gap-4 text-[10px] text-slate-500 font-bold mb-8 uppercase">
                            <span id="pEmail">email@example.com</span>
                            <span id="pPhone">000 000 0000</span>
                        </div>
                        <h4 class="font-black uppercase text-xs border-b-2 border-slate-100 pb-2 mb-4">Professional Summary</h4>
                        <p id="pSummary" class="text-sm leading-relaxed text-slate-600 italic">Your professional narrative will render here...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="coverLetterModal" class="fixed inset-0 z-[300] hidden bg-slate-950/95 backdrop-blur-xl flex items-center justify-center p-6">
        <div class="glass max-w-2xl w-full p-10 rounded-[3rem] text-center">
            <h2 class="text-3xl font-black mb-4">CV Successfully Generated!</h2>
            <p class="text-slate-400 mb-10">Would you like to generate a matching Professional Cover Letter for this role?</p>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="closeCoverModal()" class="py-4 bg-white/5 rounded-2xl font-bold text-slate-400 uppercase tracking-widest text-[10px] hover:bg-white/10 transition">No, I'm Done</button>
                <button onclick="startCoverFlow()" class="py-4 premium-gradient rounded-2xl font-black text-white uppercase tracking-widest text-[10px]">Yes, Create Letter</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, updateDoc, onSnapshot, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userPhone = null;
        let selectedTpl = 'modern';

        onAuthStateChanged(auth, (user) => {
            if (!user) { 
                window.location.href = 'index.html'; 
            } else { 
                userPhone = user.phoneNumber; 
                verifyPayment(); 
            }
        });

        function verifyPayment() {
            if (!userPhone) return;
            onSnapshot(doc(db, "users", userPhone), (snap) => {
                const data = snap.data();
                document.getElementById('loader').classList.add('hidden');
                const isPremium = data?.isPremium && Date.now() < data?.expiryTime;
                
                if (isPremium) showStep('templateStep');
                else showStep('paymentStep');
            });
        }

        // --- GLOBALIZED FUNCTIONS FOR HTML ACCESS ---

        window.payNow = function() {
            if (!userPhone) return alert("Session expired.");
            const virtualEmail = userPhone.replace('+', '') + "@quickcv.com";

            const handler = PaystackPop.setup({
                key: 'pk_test_421d171989e8c850ae50df23425b607cae9fe366',
                email: virtualEmail,
                amount: 5000, 
                currency: 'ZAR',
                // Explicit function wrapper for callback
                callback: function(response) {
                    updateDoc(doc(db, "users", userPhone), {
                        isPremium: true,
                        expiryTime: Date.now() + (30 * 24 * 60 * 60 * 1000), 
                        lastTx: response.reference
                    }).then(() => {
                        console.log("Payment Successful and account updated.");
                    });
                },
                onClose: function() {
                    console.log("Window closed.");
                }
            });
            handler.openIframe();
        };

        window.showStep = (id) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('step-hidden'));
            document.getElementById(id).classList.remove('step-hidden');
        };

        window.selectTemplate = (tpl) => {
            selectedTpl = tpl;
            document.querySelectorAll('.preview-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('t-'+tpl).classList.add('selected');
            document.getElementById('nextBtn').classList.remove('hidden');
            const canvas = document.getElementById('cv-canvas');
            canvas.className = 'bg-white text-slate-900 w-[595px] min-h-[842px] shadow-2xl p-12 tpl-' + tpl;
        };

        window.goToEditor = () => showStep('editorStep');

        window.generateAndAskCover = async () => {
            const canvas = await html2canvas(document.getElementById('cv-canvas'), { scale: 3 });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
            pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
            pdf.save(`QuickCV_Pro_${Date.now()}.pdf`);

            await updateDoc(doc(db, "users", userPhone), {
                history: arrayUnion({ type: 'CV_PRO', template: selectedTpl, timestamp: Date.now() })
            });
            document.getElementById('coverLetterModal').classList.remove('hidden');
        };

        window.closeCoverModal = () => window.location.reload();
        window.startCoverFlow = () => alert("Loading Pro Cover Letter Builder...");

        // Input sync logic
        const sync = (id, target) => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('input', (e) => {
                const targetEl = document.getElementById(target);
                if (targetEl) targetEl.innerText = e.target.value || "...";
            });
        };
        sync('fName', 'pName'); sync('fRole', 'pRole'); sync('fEmail', 'pEmail'); sync('fPhone', 'pPhone'); sync('fSummary', 'pSummary');
    </script>
</body>
</html>
Or this
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Professional Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { background: #070b14; color: white; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .step-hidden { display: none; }
        .premium-gradient { background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); }
        
        /* CV Template Switching Logic */
        #cv-canvas.tpl-modern { border-top: 12px solid #3b82f6; }
        #cv-canvas.tpl-tech { display: flex; padding: 0; }
        #cv-canvas.tpl-tech .sidebar { width: 35%; background: #1e293b; color: white; padding: 40px 20px; }
        #cv-canvas.tpl-tech .main-content { width: 65%; padding: 40px; }
        #cv-canvas.tpl-minimal { font-family: 'Georgia', serif; padding: 60px; text-align: center; }

        .preview-card { cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .preview-card:hover { transform: translateY(-5px); }
        .preview-card.selected { border: 3px solid #3b82f6; box-shadow: 0 0 25px rgba(59, 130, 246, 0.3); }
    </style>
</head>
<body class="antialiased">

    <div id="loader" class="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 mb-4"></div>
        <p class="text-xs font-bold tracking-widest text-slate-500 uppercase">Verifying Session...</p>
    </div>

    <section id="paymentStep" class="step-hidden min-h-screen flex items-center justify-center p-6">
        <div class="glass max-w-md w-full p-10 rounded-[2.5rem] text-center shadow-2xl">
            <div class="w-20 h-20 premium-gradient rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-blue-500/30">
                <i class="fas fa-crown text-3xl text-white"></i>
            </div>
            <h2 class="text-2xl font-black mb-3">Professional Pass</h2>
            <p class="text-slate-400 text-sm mb-8 leading-relaxed">Pay <span class="text-white font-bold">R50.00</span> to unlock 30 days of Unlimited Access to the AI Builder and Templates.</p>
            <button onclick="payNow()" class="w-full py-5 premium-gradient rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:scale-[1.02] transition-transform">
                Confirm & Pay R50
            </button>
        </div>
    </section>

    <section id="templateStep" class="step-hidden max-w-6xl mx-auto py-20 px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-black mb-4 tracking-tighter">Choose Your <span class="text-blue-500">Architecture</span></h2>
            <p class="text-slate-400">Select a structure that matches your industry. All are ATS-optimized.</p>
        </div>
        <div class="grid md:grid-cols-3 gap-10">
            <div onclick="selectTemplate('modern')" class="preview-card glass p-4 rounded-[2rem]" id="t-modern">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden border-t-[10px] border-blue-600">
                    <div class="p-4 space-y-2"><div class="h-4 w-1/2 bg-slate-200"></div><div class="h-2 w-full bg-slate-100"></div></div>
                </div>
                <h3 class="font-bold text-center">Modern Executive</h3>
            </div>
            <div onclick="selectTemplate('tech')" class="preview-card glass p-4 rounded-[2rem]" id="t-tech">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex">
                    <div class="w-1/3 h-full bg-slate-800"></div>
                    <div class="w-2/3 p-4"></div>
                </div>
                <h3 class="font-bold text-center">Tech Impact</h3>
            </div>
            <div onclick="selectTemplate('minimal')" class="preview-card glass p-4 rounded-[2rem]" id="t-minimal">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex flex-col items-center justify-center">
                    <div class="h-4 w-1/3 bg-slate-200 mb-2"></div>
                    <div class="h-2 w-1/2 bg-slate-100"></div>
                </div>
                <h3 class="font-bold text-center">Swiss Minimalist</h3>
            </div>
        </div>
        <div class="flex justify-center mt-12">
            <button onclick="goToEditor()" id="nextBtn" class="hidden px-12 py-5 premium-gradient rounded-full font-black uppercase tracking-widest text-xs shadow-lg shadow-purple-500/20">Initialize Builder</button>
        </div>
    </section>

    <section id="editorStep" class="step-hidden max-w-[1400px] mx-auto py-10 px-6">
        <div class="grid lg:grid-cols-2 gap-12">
            <div class="glass p-8 rounded-[2.5rem] space-y-6 h-fit sticky top-10">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-black uppercase tracking-widest text-blue-500 text-sm">Professional Profile</h3>
                    <span class="text-[10px] bg-white/5 px-3 py-1 rounded-full text-slate-400">Step 2 of 3</span>
                </div>
                <input type="text" id="fName" placeholder="Full Name" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <input type="text" id="fRole" placeholder="Target Professional Title" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="fEmail" placeholder="Email Address" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                    <input type="text" id="fPhone" placeholder="Phone Number" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                </div>
                <textarea id="fSummary" placeholder="Professional Summary (Describe your career highlights...)" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 h-40 outline-none focus:border-blue-500"></textarea>
                
                <button onclick="generateAndAskCover()" class="w-full py-5 premium-gradient text-white rounded-2xl font-black uppercase tracking-[0.2em] text-xs shadow-xl">
                    Generate CV & Continue
                </button>
            </div>

            <div class="flex flex-col items-center">
                <div id="cv-canvas" class="bg-white text-slate-900 w-[595px] min-h-[842px] shadow-[0_0_50px_rgba(0,0,0,0.5)] p-12 overflow-hidden transition-all">
                    <div id="cv-content">
                        <h1 id="pName" class="text-4xl font-black uppercase leading-none mb-2">Full Name</h1>
                        <p id="pRole" class="text-blue-600 font-bold uppercase tracking-widest text-xs mb-6">Target Professional Title</p>
                        <div class="flex gap-4 text-[10px] text-slate-500 font-bold mb-8 uppercase">
                            <span id="pEmail">email@example.com</span>
                            <span id="pPhone">000 000 0000</span>
                        </div>
                        <h4 class="font-black uppercase text-xs border-b-2 border-slate-100 pb-2 mb-4">Professional Summary</h4>
                        <p id="pSummary" class="text-sm leading-relaxed text-slate-600 italic">Your professional narrative will render here in real-time...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="coverLetterModal" class="fixed inset-0 z-[300] hidden bg-slate-950/95 backdrop-blur-xl flex items-center justify-center p-6">
        <div class="glass max-w-2xl w-full p-10 rounded-[3rem] text-center">
            <h2 class="text-3xl font-black mb-4">CV Successfully Generated!</h2>
            <p class="text-slate-400 mb-10">Would you like to generate a matching Professional Cover Letter for this role?</p>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="closeCoverModal()" class="py-4 bg-white/5 rounded-2xl font-bold text-slate-400 uppercase tracking-widest text-[10px] hover:bg-white/10 transition">No, I'm Done</button>
                <button onclick="startCoverFlow()" class="py-4 premium-gradient rounded-2xl font-black text-white uppercase tracking-widest text-[10px]">Yes, Create Letter</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, updateDoc, onSnapshot, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userPhone = null; // FIXED: Use Phone instead of Email
        let selectedTpl = 'modern';

        onAuthStateChanged(auth, (user) => {
            if (!user) { 
                window.location.href = 'index.html'; 
            } else { 
                userPhone = user.phoneNumber; // FIXED
                verifyPayment(); 
            }
        });

        function verifyPayment() {
            if (!userPhone) return;
            onSnapshot(doc(db, "users", userPhone), (snap) => {
                const data = snap.data();
                document.getElementById('loader').classList.add('hidden');
                const isPremium = data?.isPremium && Date.now() < data?.expiryTime;
                
                if (isPremium) showStep('templateStep');
                else showStep('paymentStep');
            });
        }

        window.payNow = function() {
            if (!userPhone) return alert("Session expired. Please login again.");
            
            // Create a virtual email for Paystack since SMS users don't have one
            const virtualEmail = userPhone.replace('+', '') + "@quickcv.com";

            const handler = PaystackPop.setup({
                key: 'pk_test_421d171989e8c850ae50df23425b607cae9fe366',
                email: virtualEmail,
                amount: 5000, 
                currency: 'ZAR',
                callback: async (res) => {
                    await updateDoc(doc(db, "users", userPhone), {
                        isPremium: true,
                        expiryTime: Date.now() + (30 * 24 * 60 * 60 * 1000), 
                        lastTx: res.reference
                    });
                }
            });
            handler.openIframe();
        };

        window.showStep = (id) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('step-hidden'));
            document.getElementById(id).classList.remove('step-hidden');
        };

        window.selectTemplate = (tpl) => {
            selectedTpl = tpl;
            document.querySelectorAll('.preview-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('t-'+tpl).classList.add('selected');
            document.getElementById('nextBtn').classList.remove('hidden');
            
            const canvas = document.getElementById('cv-canvas');
            canvas.className = 'bg-white text-slate-900 w-[595px] min-h-[842px] shadow-2xl p-12 tpl-' + tpl;
        };

        window.goToEditor = () => showStep('editorStep');

        const sync = (id, target) => {
            const el = document.getElementById(id);
            if (el) {
                el.addEventListener('input', (e) => {
                    document.getElementById(target).innerText = e.target.value || "...";
                });
            }
        };
        sync('fName', 'pName'); sync('fRole', 'pRole'); sync('fEmail', 'pEmail'); sync('fPhone', 'pPhone'); sync('fSummary', 'pSummary');

        window.generateAndAskCover = async () => {
            const canvas = await html2canvas(document.getElementById('cv-canvas'), { scale: 3 });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({
                orientation: 'p',
                unit: 'mm',
                format: 'a4'
            });

            pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
            pdf.save(`QuickCV_Pro_${Date.now()}.pdf`);

            await updateDoc(doc(db, "users", userPhone), {
                history: arrayUnion({
                    type: 'CV_PRO',
                    template: selectedTpl,
                    timestamp: Date.now()
                })
            });

            document.getElementById('coverLetterModal').classList.remove('hidden');
        };

        window.closeCoverModal = () => {
            alert("Professional Suite Finished. Check your 'History' portal.");
            window.location.reload();
        };

        window.startCoverFlow = () => {
            alert("Loading Pro Cover Letter Builder...");
        };
    </script>
</body>
</html>
Or this
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Professional Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { background: #070b14; color: white; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .step-hidden { display: none; }
        .premium-gradient { background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); }
        
        #cv-canvas.tpl-modern { border-top: 12px solid #3b82f6; }
        #cv-canvas.tpl-tech { display: flex; padding: 0; }
        #cv-canvas.tpl-tech .sidebar { width: 35%; background: #1e293b; color: white; padding: 40px 20px; }
        #cv-canvas.tpl-tech .main-content { width: 65%; padding: 40px; }
        #cv-canvas.tpl-minimal { font-family: 'Georgia', serif; padding: 60px; text-align: center; }

        .preview-card { cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .preview-card:hover { transform: translateY(-5px); }
        .preview-card.selected { border: 3px solid #3b82f6; box-shadow: 0 0 25px rgba(59, 130, 246, 0.3); }
    </style>
</head>
<body class="antialiased">

    <div id="loader" class="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 mb-4"></div>
        <p class="text-xs font-bold tracking-widest text-slate-500 uppercase">Verifying Session...</p>
    </div>

    <section id="paymentStep" class="step-hidden min-h-screen flex items-center justify-center p-6">
        <div class="glass max-w-md w-full p-10 rounded-[2.5rem] text-center shadow-2xl">
            <div class="w-20 h-20 premium-gradient rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-blue-500/30">
                <i class="fas fa-crown text-3xl text-white"></i>
            </div>
            <h2 class="text-2xl font-black mb-3">Professional Pass</h2>
            <p class="text-slate-400 text-sm mb-8 leading-relaxed">Pay <span class="text-white font-bold">R50.00</span> to unlock 30 days of Unlimited Access to the AI Builder and Templates.</p>
            <button onclick="payNow()" class="w-full py-5 premium-gradient rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:scale-[1.02] transition-transform">
                Confirm & Pay R50
            </button>
        </div>
    </section>

    <section id="templateStep" class="step-hidden max-w-6xl mx-auto py-20 px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-black mb-4 tracking-tighter">Choose Your <span class="text-blue-500">Architecture</span></h2>
            <p class="text-slate-400">Select a structure that matches your industry.</p>
        </div>
        <div class="grid md:grid-cols-3 gap-10">
            <div onclick="selectTemplate('modern')" class="preview-card glass p-4 rounded-[2rem]" id="t-modern">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden border-t-[10px] border-blue-600"></div>
                <h3 class="font-bold text-center">Modern Executive</h3>
            </div>
            <div onclick="selectTemplate('tech')" class="preview-card glass p-4 rounded-[2rem]" id="t-tech">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex">
                    <div class="w-1/3 h-full bg-slate-800"></div>
                </div>
                <h3 class="font-bold text-center">Tech Impact</h3>
            </div>
            <div onclick="selectTemplate('minimal')" class="preview-card glass p-4 rounded-[2rem]" id="t-minimal">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden"></div>
                <h3 class="font-bold text-center">Swiss Minimalist</h3>
            </div>
        </div>
        <div class="flex justify-center mt-12">
            <button onclick="goToEditor()" id="nextBtn" class="hidden px-12 py-5 premium-gradient rounded-full font-black uppercase tracking-widest text-xs">Initialize Builder</button>
        </div>
    </section>

    <section id="editorStep" class="step-hidden max-w-[1400px] mx-auto py-10 px-6">
        <div class="grid lg:grid-cols-2 gap-12">
            <div class="glass p-8 rounded-[2.5rem] space-y-6 h-fit sticky top-10">
                <input type="text" id="fName" placeholder="Full Name" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10">
                <input type="text" id="fRole" placeholder="Professional Title" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="fEmail" placeholder="Email Address" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                    <input type="text" id="fPhone" placeholder="Phone Number" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                </div>
                <textarea id="fSummary" placeholder="Professional Summary..." class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 h-40"></textarea>
                <button onclick="generateAndAskCover()" class="w-full py-5 premium-gradient text-white rounded-2xl font-black uppercase text-xs">Generate CV & Continue</button>
            </div>
            <div class="flex flex-col items-center">
                <div id="cv-canvas" class="bg-white text-slate-900 w-[595px] min-h-[842px] shadow-2xl p-12 overflow-hidden transition-all">
                    <h1 id="pName" class="text-4xl font-black mb-2">Full Name</h1>
                    <p id="pRole" class="text-blue-600 font-bold uppercase text-xs mb-6">Title</p>
                    <div class="flex gap-4 text-[10px] text-slate-500 font-bold mb-8">
                        <span id="pEmail">email@example.com</span>
                        <span id="pPhone">000 000 0000</span>
                    </div>
                    <p id="pSummary" class="text-sm leading-relaxed text-slate-600">Summary...</p>
                </div>
            </div>
        </div>
    </section>

    <div id="coverLetterModal" class="fixed inset-0 z-[300] hidden bg-slate-950/95 backdrop-blur-xl flex items-center justify-center p-6">
        <div class="glass max-w-2xl w-full p-10 rounded-[3rem] text-center">
            <h2 class="text-3xl font-black mb-4">CV Successfully Generated!</h2>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="closeCoverModal()" class="py-4 bg-white/5 rounded-2xl font-bold text-slate-400">No, I'm Done</button>
                <button onclick="startCoverFlow()" class="py-4 premium-gradient rounded-2xl font-black text-white">Yes, Create Letter</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, updateDoc, onSnapshot, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userPhone = null;
        let selectedTpl = 'modern';

        onAuthStateChanged(auth, (user) => {
            if (!user) { window.location.href = 'index.html'; }
            else { 
                userPhone = user.phoneNumber; 
                verifyPayment(); 
            }
        });

        function verifyPayment() {
            if (!userPhone) return;
            onSnapshot(doc(db, "users", userPhone), (snap) => {
                const data = snap.data();
                document.getElementById('loader').classList.add('hidden');
                if (data?.isPremium && Date.now() < data?.expiryTime) showStep('templateStep');
                else showStep('paymentStep');
            });
        }

        // FIXED PAYSTACK LOGIC
        window.payNow = function() {
            const virtualEmail = userPhone.replace('+', '') + "@quickcv.com";
            
            const handler = PaystackPop.setup({
                key: 'pk_test_421d171989e8c850ae50df23425b607cae9fe366',
                email: virtualEmail,
                amount: 5000, 
                currency: 'ZAR',
                callback: function(response) {
                    // Standard function avoids the "callback must be valid function" error
                    updateDoc(doc(db, "users", userPhone), {
                        isPremium: true,
                        expiryTime: Date.now() + (30 * 24 * 60 * 60 * 1000), 
                        lastTx: response.reference
                    });
                }
            });
            handler.openIframe();
        };

        window.showStep = (id) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('step-hidden'));
            document.getElementById(id).classList.remove('step-hidden');
        };

        window.selectTemplate = (tpl) => {
            selectedTpl = tpl;
            document.querySelectorAll('.preview-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('t-'+tpl).classList.add('selected');
            document.getElementById('nextBtn').classList.remove('hidden');
            document.getElementById('cv-canvas').className = 'bg-white text-slate-900 w-[595px] min-h-[842px] shadow-2xl p-12 tpl-' + tpl;
        };

        window.goToEditor = () => showStep('editorStep');

        window.generateAndAskCover = async () => {
            const canvas = await html2canvas(document.getElementById('cv-canvas'), { scale: 3 });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
            pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
            pdf.save(`QuickCV_Pro_${Date.now()}.pdf`);

            await updateDoc(doc(db, "users", userPhone), {
                history: arrayUnion({ type: 'CV_PRO', template: selectedTpl, timestamp: Date.now() })
            });
            document.getElementById('coverLetterModal').classList.remove('hidden');
        };

        window.closeCoverModal = () => window.location.reload();
        window.startCoverFlow = () => alert("Loading Pro Cover Letter Builder...");

        // Input sync
        const sync = (id, target) => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('input', (e) => {
                document.getElementById(target).innerText = e.target.value || "...";
            });
        };
        sync('fName', 'pName'); sync('fRole', 'pRole'); sync('fEmail', 'pEmail'); sync('fPhone', 'pPhone'); sync('fSummary', 'pSummary');
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Professional Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');
        body { background: #070b14; color: white; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .step-hidden { display: none; }
        .premium-gradient { background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); }
        
        #cv-canvas.tpl-modern { border-top: 12px solid #3b82f6; }
        #cv-canvas.tpl-tech { display: flex; padding: 0; }
        #cv-canvas.tpl-tech .sidebar { width: 35%; background: #1e293b; color: white; padding: 40px 20px; }
        #cv-canvas.tpl-tech .main-content { width: 65%; padding: 40px; }
        #cv-canvas.tpl-minimal { font-family: 'Georgia', serif; padding: 60px; text-align: center; }

        .preview-card { cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .preview-card:hover { transform: translateY(-5px); }
        .preview-card.selected { border: 3px solid #3b82f6; box-shadow: 0 0 25px rgba(59, 130, 246, 0.3); }
    </style>
</head>
<body class="antialiased">

    <div id="loader" class="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-blue-500 mb-4"></div>
        <p class="text-xs font-bold tracking-widest text-slate-500 uppercase">Verifying Session...</p>
    </div>

    <section id="paymentStep" class="step-hidden min-h-screen flex items-center justify-center p-6">
        <div class="glass max-w-md w-full p-10 rounded-[2.5rem] text-center shadow-2xl">
            <div class="w-20 h-20 premium-gradient rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl shadow-blue-500/30">
                <i class="fas fa-crown text-3xl text-white"></i>
            </div>
            <h2 class="text-2xl font-black mb-3">Professional Pass</h2>
            <p class="text-slate-400 text-sm mb-8 leading-relaxed">Pay <span class="text-white font-bold">R50.00</span> to unlock 30 days of Unlimited Access to the AI Builder and Templates.</p>
            <button onclick="window.payNow()" class="w-full py-5 premium-gradient rounded-2xl font-black uppercase tracking-[0.2em] text-xs hover:scale-[1.02] transition-transform">
                Confirm & Pay R50
            </button>
        </div>
    </section>

    <section id="templateStep" class="step-hidden max-w-6xl mx-auto py-20 px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-black mb-4 tracking-tighter">Choose Your <span class="text-blue-500">Architecture</span></h2>
            <p class="text-slate-400">Select a structure that matches your industry. All are ATS-optimized.</p>
        </div>
        <div class="grid md:grid-cols-3 gap-10">
            <div onclick="selectTemplate('modern')" class="preview-card glass p-4 rounded-[2rem]" id="t-modern">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden border-t-[10px] border-blue-600">
                    <div class="p-4 space-y-2"><div class="h-4 w-1/2 bg-slate-200"></div><div class="h-2 w-full bg-slate-100"></div></div>
                </div>
                <h3 class="font-bold text-center">Modern Executive</h3>
            </div>
            <div onclick="selectTemplate('tech')" class="preview-card glass p-4 rounded-[2rem]" id="t-tech">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex">
                    <div class="w-1/3 h-full bg-slate-800"></div>
                    <div class="w-2/3 p-4"></div>
                </div>
                <h3 class="font-bold text-center">Tech Impact</h3>
            </div>
            <div onclick="selectTemplate('minimal')" class="preview-card glass p-4 rounded-[2rem]" id="t-minimal">
                <div class="aspect-[1/1.4] bg-white rounded-2xl mb-4 overflow-hidden flex flex-col items-center justify-center">
                    <div class="h-4 w-1/3 bg-slate-200 mb-2"></div>
                    <div class="h-2 w-1/2 bg-slate-100"></div>
                </div>
                <h3 class="font-bold text-center">Swiss Minimalist</h3>
            </div>
        </div>
        <div class="flex justify-center mt-12">
            <button onclick="goToEditor()" id="nextBtn" class="hidden px-12 py-5 premium-gradient rounded-full font-black uppercase tracking-widest text-xs shadow-lg shadow-purple-500/20">Initialize Builder</button>
        </div>
    </section>

    <section id="editorStep" class="step-hidden max-w-[1400px] mx-auto py-10 px-6">
        <div class="grid lg:grid-cols-2 gap-12">
            <div class="glass p-8 rounded-[2.5rem] space-y-6 h-fit sticky top-10">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-black uppercase tracking-widest text-blue-500 text-sm">Professional Profile</h3>
                    <span class="text-[10px] bg-white/5 px-3 py-1 rounded-full text-slate-400">Step 2 of 3</span>
                </div>
                <input type="text" id="fName" placeholder="Full Name" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <input type="text" id="fRole" placeholder="Target Professional Title" class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 outline-none focus:border-blue-500 transition">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="fEmail" placeholder="Email Address" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                    <input type="text" id="fPhone" placeholder="Phone Number" class="p-4 bg-white/5 rounded-2xl border border-white/10">
                </div>
                <textarea id="fSummary" placeholder="Professional Summary..." class="w-full p-4 bg-white/5 rounded-2xl border border-white/10 h-40 outline-none focus:border-blue-500"></textarea>
                
                <button onclick="generateAndAskCover()" class="w-full py-5 premium-gradient text-white rounded-2xl font-black uppercase tracking-[0.2em] text-xs shadow-xl">
                    Generate CV & Continue
                </button>
            </div>

            <div class="flex flex-col items-center">
                <div id="cv-canvas" class="bg-white text-slate-900 w-[595px] min-h-[842px] shadow-[0_0_50px_rgba(0,0,0,0.5)] p-12 overflow-hidden transition-all">
                    <div id="cv-content">
                        <h1 id="pName" class="text-4xl font-black uppercase leading-none mb-2">Full Name</h1>
                        <p id="pRole" class="text-blue-600 font-bold uppercase tracking-widest text-xs mb-6">Target Professional Title</p>
                        <div class="flex gap-4 text-[10px] text-slate-500 font-bold mb-8 uppercase">
                            <span id="pEmail">email@example.com</span>
                            <span id="pPhone">000 000 0000</span>
                        </div>
                        <h4 class="font-black uppercase text-xs border-b-2 border-slate-100 pb-2 mb-4">Professional Summary</h4>
                        <p id="pSummary" class="text-sm leading-relaxed text-slate-600 italic">Your professional narrative will render here...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="coverLetterModal" class="fixed inset-0 z-[300] hidden bg-slate-950/95 backdrop-blur-xl flex items-center justify-center p-6">
        <div class="glass max-w-2xl w-full p-10 rounded-[3rem] text-center">
            <h2 class="text-3xl font-black mb-4">CV Successfully Generated!</h2>
            <p class="text-slate-400 mb-10">Would you like to generate a matching Professional Cover Letter for this role?</p>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="closeCoverModal()" class="py-4 bg-white/5 rounded-2xl font-bold text-slate-400 uppercase tracking-widest text-[10px] hover:bg-white/10 transition">No, I'm Done</button>
                <button onclick="startCoverFlow()" class="py-4 premium-gradient rounded-2xl font-black text-white uppercase tracking-widest text-[10px]">Yes, Create Letter</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, updateDoc, onSnapshot, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        let userPhone = null;
        let selectedTpl = 'modern';

        onAuthStateChanged(auth, (user) => {
            if (!user) { 
                window.location.href = 'index.html'; 
            } else { 
                userPhone = user.phoneNumber; 
                verifyPayment(); 
            }
        });

        function verifyPayment() {
            if (!userPhone) return;
            onSnapshot(doc(db, "users", userPhone), (snap) => {
                const data = snap.data();
                document.getElementById('loader').classList.add('hidden');
                const isPremium = data?.isPremium && Date.now() < data?.expiryTime;
                
                if (isPremium) showStep('templateStep');
                else showStep('paymentStep');
            });
        }

        // --- GLOBALIZED FUNCTIONS FOR HTML ACCESS ---

        window.payNow = function() {
            if (!userPhone) return alert("Session expired.");
            const virtualEmail = userPhone.replace('+', '') + "@quickcv.com";

            const handler = PaystackPop.setup({
                key: 'pk_test_421d171989e8c850ae50df23425b607cae9fe366',
                email: virtualEmail,
                amount: 5000, 
                currency: 'ZAR',
                // Explicit function wrapper for callback
                callback: function(response) {
                    updateDoc(doc(db, "users", userPhone), {
                        isPremium: true,
                        expiryTime: Date.now() + (30 * 24 * 60 * 60 * 1000), 
                        lastTx: response.reference
                    }).then(() => {
                        console.log("Payment Successful and account updated.");
                    });
                },
                onClose: function() {
                    console.log("Window closed.");
                }
            });
            handler.openIframe();
        };

        window.showStep = (id) => {
            document.querySelectorAll('section').forEach(s => s.classList.add('step-hidden'));
            document.getElementById(id).classList.remove('step-hidden');
        };

        window.selectTemplate = (tpl) => {
            selectedTpl = tpl;
            document.querySelectorAll('.preview-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('t-'+tpl).classList.add('selected');
            document.getElementById('nextBtn').classList.remove('hidden');
            const canvas = document.getElementById('cv-canvas');
            canvas.className = 'bg-white text-slate-900 w-[595px] min-h-[842px] shadow-2xl p-12 tpl-' + tpl;
        };

        window.goToEditor = () => showStep('editorStep');

        window.generateAndAskCover = async () => {
            const canvas = await html2canvas(document.getElementById('cv-canvas'), { scale: 3 });
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });
            pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
            pdf.save(`QuickCV_Pro_${Date.now()}.pdf`);

            await updateDoc(doc(db, "users", userPhone), {
                history: arrayUnion({ type: 'CV_PRO', template: selectedTpl, timestamp: Date.now() })
            });
            document.getElementById('coverLetterModal').classList.remove('hidden');
        };

        window.closeCoverModal = () => window.location.reload();
        window.startCoverFlow = () => alert("Loading Pro Cover Letter Builder...");

        // Input sync logic
        const sync = (id, target) => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('input', (e) => {
                const targetEl = document.getElementById(target);
                if (targetEl) targetEl.innerText = e.target.value || "...";
            });
        };
        sync('fName', 'pName'); sync('fRole', 'pRole'); sync('fEmail', 'pEmail'); sync('fPhone', 'pPhone'); sync('fSummary', 'pSummary');
    </script>
</body>
</html>




inline.js:1 
 Uncaught Error: Attribute callback must be a valid function
i	@	inline.js:1
r	@	inline.js:1
validateInputTypes	@	inline.js:1
isValid	@	inline.js:1
setup	@	inline.js:1
window.payNow	@	fifty.html:180
onclick	@	fifty.html:46




rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // We target the 'users' collection where the Document ID is the phone number
    match /users/{phoneId} {
      
      // ALLOW READ: Only if the person is logged in AND their token matches this document ID
      // ALLOW UPDATE: Same security check (prevents users from updating other people's premium status)
      allow read, update: if request.auth != null && request.auth.token.phone_number == phoneId;
      
      // ALLOW CREATE: Only if the person is logged in. 
      // This is used for the very first time they log in and don't have a document yet.
      allow create: if request.auth != null && request.auth.token.phone_number == phoneId;
      
      // ALLOW DELETE: Usually, we don't want users deleting their own profiles/history
      allow delete: if false; 
    }
  }
}


so first should be a page where they see a an example of how the cv and cover letter will look like and on the bottom of that should be those two box options 1. click here to get unlimted cvs and cover letters r5 for 1 day, r10 for 3 days r20 for 15 days, r30 30 days....2. click here to get watch to earn stars, whats at three ads to get get 3 stars and generate 1 cv and 1 cover letter and also bank star for future use. on the top right show me buttons that when clicked leads to those job offers, job site where user has to sign up and those kind of thing




give me full html codes for this(css+js+html in one html) it uses this // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
  authDomain: "quickcv-47c99.firebaseapp.com",
  projectId: "quickcv-47c99",
  storageBucket: "quickcv-47c99.firebasestorage.app",
  messagingSenderId: "541347686112",
  appId: "1:541347686112:web:b821dd7213ab8674959285",
  measurementId: "G-NQ66199Z12"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);






<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Premium Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f3f4f6; font-family: 'Inter', sans-serif; }
        .cv-preview { box-shadow: 0 10px 25px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .cv-preview:hover { transform: scale(1.02); }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body>

    <nav class="bg-white border-b p-4 flex justify-between items-center sticky top-0 z-50">
        <div class="text-2xl font-bold text-blue-600">Quick<span class="text-gray-800">CV</span></div>
        <div class="flex space-x-4">
            <a href="https://indeed.com" target="_blank" class="flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-semibold">
                <i class="fas fa-briefcase mr-2"></i> Job Offers
            </a>
            <a href="#" class="flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-semibold">
                <i class="fas fa-graduation-cap mr-2"></i> Career Boost
            </a>
            <div class="flex items-center px-4 py-2 bg-yellow-100 border border-yellow-300 rounded-lg text-sm font-bold text-yellow-700">
                <i class="fas fa-star mr-2"></i> Stars: <span id="starCount" class="ml-1">0</span>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-6">
        
        <h2 class="text-center text-xl font-bold text-gray-700 mb-6">Preview Your Documents</h2>
        <div class="flex flex-col md:flex-row gap-6 mb-12 justify-center">
            <div class="cv-preview bg-white p-4 border rounded shadow-sm w-full md:w-64">
                <div class="h-80 bg-gray-200 rounded flex items-center justify-center text-gray-400">
                    <img src="https://via.placeholder.com/200x280?text=CV+Preview" alt="CV Preview">
                </div>
                <p class="text-center mt-2 font-bold text-sm">Professional CV</p>
            </div>
            <div class="cv-preview bg-white p-4 border rounded shadow-sm w-full md:w-64">
                <div class="h-80 bg-gray-200 rounded flex items-center justify-center text-gray-400">
                    <img src="https://via.placeholder.com/200x280?text=Cover+Letter+Preview" alt="CL Preview">
                </div>
                <p class="text-center mt-2 font-bold text-sm">Matching Cover Letter</p>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
            
            <div class="bg-white p-8 rounded-2xl shadow-lg border-2 border-blue-500 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-blue-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold uppercase">Popular</div>
                <h3 class="text-2xl font-black text-gray-800 mb-4">Unlimited Access</h3>
                <p class="text-gray-500 mb-6 text-sm">Generate and edit as many as you want.</p>
                
                <div class="space-y-3">
                    <button onclick="pay('R5', 1)" class="w-full flex justify-between p-3 border rounded-xl hover:bg-blue-50 transition">
                        <span>1 Day</span> <span class="font-bold">R5</span>
                    </button>
                    <button onclick="pay('R10', 3)" class="w-full flex justify-between p-3 border rounded-xl hover:bg-blue-50 transition">
                        <span>3 Days</span> <span class="font-bold">R10</span>
                    </button>
                    <button onclick="pay('R20', 15)" class="w-full flex justify-between p-3 border rounded-xl hover:bg-blue-50 transition">
                        <span>15 Days</span> <span class="font-bold">R20</span>
                    </button>
                    <button onclick="pay('R30', 30)" class="w-full flex justify-between p-3 border-2 border-green-500 rounded-xl bg-green-50 font-bold">
                        <span>30 Days</span> <span>R30</span>
                    </button>
                </div>
                <button onclick="pay('R30', 30)" class="w-full mt-6 bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-blue-700">Unlock Unlimited Now</button>
            </div>

            <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
                <h3 class="text-2xl font-black text-gray-800 mb-4">Watch & Earn</h3>
                <p class="text-gray-500 mb-6 text-sm">No money? No problem. Watch ads to earn stars.</p>
                
                <div class="bg-orange-50 border border-orange-200 p-4 rounded-xl mb-6">
                    <ul class="text-sm space-y-2 text-orange-800">
                        <li><i class="fas fa-check-circle mr-2"></i> Watch 3 ads for 3 Stars</li>
                        <li><i class="fas fa-check-circle mr-2"></i> 3 Stars = 1 CV & 1 Cover Letter</li>
                        <li><i class="fas fa-check-circle mr-2"></i> Bank stars for future use</li>
                    </ul>
                </div>

                <div id="adProgress" class="hidden mb-4">
                    <p class="text-xs font-bold mb-1 text-orange-600">Ads Watched: <span id="adsCount">0</span>/3</p>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-orange-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <button id="watchAdBtn" onclick="simulateAd()" class="w-full bg-orange-500 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-orange-600 flex flex-col items-center">
                    <span>Watch Ads to Earn Stars</span>
                    <span class="text-xs opacity-80 font-normal">Ads remaining: 3</span>
                </button>
            </div>

        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285",
            measurementId: "G-NQ66199Z12"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        // --- APP LOGIC ---
        let stars = localStorage.getItem('stars') ? parseInt(localStorage.getItem('stars')) : 0;
        let adsWatched = 0;

        const starDisplay = document.getElementById('starCount');
        const watchBtn = document.getElementById('watchAdBtn');
        const adProgressDiv = document.getElementById('adProgress');
        const adsCountSpan = document.getElementById('adsCount');
        const progressBar = document.getElementById('progressBar');

        starDisplay.innerText = stars;

        // RESTORED WATCH & EARN LOGIC
        window.simulateAd = function() {
            adProgressDiv.classList.remove('hidden');
            watchBtn.disabled = true;
            watchBtn.innerText = "Ad Playing...";

            setTimeout(() => {
                adsWatched++;
                adsCountSpan.innerText = adsWatched;
                progressBar.style.width = (adsWatched / 3 * 100) + "%";

                if (adsWatched >= 3) {
                    stars += 3;
                    localStorage.setItem('stars', stars);
                    starDisplay.innerText = stars;
                    adsWatched = 0;
                    alert("Congratulations! You earned 3 Stars.");
                    resetAdUI();
                } else {
                    watchBtn.disabled = false;
                    watchBtn.innerHTML = `<span>Watch Next Ad</span><span class="text-xs opacity-80 font-normal">Ads remaining: ${3 - adsWatched}</span>`;
                }
            }, 3000);
        };

        function resetAdUI() {
            adProgressDiv.classList.add('hidden');
            progressBar.style.width = "0%";
            watchBtn.disabled = false;
            watchBtn.innerHTML = `<span>Watch Ads to Earn Stars</span><span class="text-xs opacity-80 font-normal">Ads remaining: 3</span>`;
        }

        // TRANSACTION LOGIC (PAYSTACK)
        window.pay = function(planName, days) {
            // Convert R price to numerical cents (e.g., "R5" -> 500)
            const price = parseInt(planName.replace('R', '')) * 100;

            let handler = PaystackPop.setup({
                key: 'pk_test_421d171989e8c850ae50df23425b607cae9fe366', 
                email: 'customer@email.com', 
                amount: price,
                currency: 'ZAR',
                metadata: {
                    custom_fields: [{ display_name: "Plan Name", variable_name: "plan", value: planName }]
                },
                callback: function(response){
                    alert('Payment Successful! Reference: ' + response.reference);
                    // Logic to unlock premium for 'days'
                },
                onClose: function(){
                    alert('Transaction cancelled.');
                }
            });
            handler.openIframe();
        }
    </script>
</body>
</html>


