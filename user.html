<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuickCV | Premium Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #f3f4f6; font-family: 'Inter', sans-serif; }
        .cv-preview { box-shadow: 0 10px 25px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        .cv-preview:hover { transform: scale(1.02); }
    </style>
</head>
<body>

    <nav class="bg-white border-b p-4 flex justify-between items-center sticky top-0 z-50">
        <div class="text-2xl font-bold text-blue-600">Quick<span class="text-gray-800">CV</span></div>
        <div class="flex space-x-4">
            <a href="https://indeed.com" target="_blank" class="flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-semibold">
                <i class="fas fa-briefcase mr-2"></i> Job Offers
            </a>
            <div class="flex items-center px-4 py-2 bg-yellow-100 border border-yellow-300 rounded-lg text-sm font-bold text-yellow-700">
                <i class="fas fa-star mr-2"></i> Stars: <span id="starCount" class="ml-1">0</span>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-6">
        <h2 class="text-center text-xl font-bold text-gray-700 mb-6">Preview Your Documents</h2>
        <div class="flex flex-col md:flex-row gap-6 mb-12 justify-center">
            <div class="cv-preview bg-white p-4 border rounded shadow-sm w-full md:w-64 text-center">
                <img src="https://via.placeholder.com/200x280?text=CV+Preview" class="mx-auto rounded">
                <p class="mt-2 font-bold text-sm">Professional CV</p>
            </div>
            <div class="cv-preview bg-white p-4 border rounded shadow-sm w-full md:w-64 text-center">
                <img src="https://via.placeholder.com/200x280?text=Cover+Letter+Preview" class="mx-auto rounded">
                <p class="mt-2 font-bold text-sm">Matching Cover Letter</p>
            </div>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
            <div class="bg-white p-8 rounded-2xl shadow-lg border-2 border-blue-500 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-blue-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold uppercase">Instant Access</div>
                <h3 class="text-2xl font-black text-gray-800 mb-4">Unlimited Access</h3>
                <p class="text-gray-500 mb-6 text-sm">Pay once, get unlimited downloads. Supports Card, EFT, and Vouchers.</p>
                
                <div class="space-y-3">
                    <button onclick="payWithPaystack(5, 1)" class="w-full flex justify-between p-4 border rounded-xl hover:border-blue-500 hover:bg-blue-50 transition group">
                        <span class="font-semibold group-hover:text-blue-700">1 Day Access</span> 
                        <span class="font-bold text-blue-600">R5</span>
                    </button>
                    <button onclick="payWithPaystack(10, 3)" class="w-full flex justify-between p-4 border rounded-xl hover:border-blue-500 hover:bg-blue-50 transition group">
                        <span class="font-semibold group-hover:text-blue-700">3 Days Access</span> 
                        <span class="font-bold text-blue-600">R10</span>
                    </button>
                    <button onclick="payWithPaystack(20, 15)" class="w-full flex justify-between p-4 border rounded-xl hover:border-blue-500 hover:bg-blue-50 transition group">
                        <span class="font-semibold group-hover:text-blue-700">15 Days Access</span> 
                        <span class="font-bold text-blue-600">R20</span>
                    </button>
                    <button onclick="payWithPaystack(30, 30)" class="w-full flex justify-between p-4 border-2 border-green-500 rounded-xl bg-green-50 font-bold group">
                        <span class="text-green-700">30 Days (Monthly)</span> 
                        <span class="text-green-700">R30</span>
                    </button>
                </div>
            </div>

            <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200">
                <h3 class="text-2xl font-black text-gray-800 mb-4">Watch & Earn</h3>
                <p class="text-gray-500 mb-6 text-sm">3 Ads = 1 Full Set (CV + Cover Letter)</p>
                
                <div id="adProgress" class="hidden mb-4">
                    <p class="text-xs font-bold mb-1 text-orange-600">Watching Ad: <span id="adsCount">0</span>/3</p>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="progressBar" class="bg-orange-500 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <button id="watchAdBtn" onclick="simulateAd()" class="w-full bg-orange-500 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-orange-600 flex flex-col items-center">
                    <span>Watch Ads to Earn Stars</span>
                </button>
            </div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
            authDomain: "quickcv-47c99.firebaseapp.com",
            projectId: "quickcv-47c99",
            storageBucket: "quickcv-47c99.firebasestorage.app",
            messagingSenderId: "541347686112",
            appId: "1:541347686112:web:b821dd7213ab8674959285"
        };

        const app = initializeApp(firebaseConfig);

        // --- PAYMENT LOGIC (PAYSTACK) ---
        window.payWithPaystack = function(amountRands, days) {
            let handler = PaystackPop.setup({
                key: 'pk_test_xxxxxxxxxxxxxxxxxxxxxxxx', // REPLACE THIS WITH YOUR PAYSTACK PUBLIC KEY
                email: 'customer@email.com', // You should get this from your user login/form
                amount: amountRands * 100, // Paystack works in Cents (R5 = 500 cents)
                currency: 'ZAR',
                metadata: {
                    custom_fields: [{ display_name: "Plan Days", variable_name: "plan_days", value: days }]
                },
                callback: function(response){
                    alert('Payment Successful! Reference: ' + response.reference);
                    // Update Firebase here to set user as Premium for 'days' number of days
                    console.log("Unlock access for:", days, "days");
                },
                onClose: function(){
                    alert('Transaction was not completed.');
                }
            });
            handler.openIframe();
        }

        // --- AD LOGIC ---
        let stars = localStorage.getItem('stars') ? parseInt(localStorage.getItem('stars')) : 0;
        let adsWatched = 0;
        document.getElementById('starCount').innerText = stars;

        window.simulateAd = function() {
            const btn = document.getElementById('watchAdBtn');
            const progress = document.getElementById('adProgress');
            progress.classList.remove('hidden');
            btn.disabled = true;
            btn.innerText = "Ad Playing (3s)...";

            setTimeout(() => {
                adsWatched++;
                document.getElementById('adsCount').innerText = adsWatched;
                document.getElementById('progressBar').style.width = (adsWatched / 3 * 100) + "%";

                if (adsWatched >= 3) {
                    stars += 3;
                    localStorage.setItem('stars', stars);
                    document.getElementById('starCount').innerText = stars;
                    adsWatched = 0;
                    alert("3 Stars Added to your Bank!");
                    resetAdUI();
                } else {
                    btn.disabled = false;
                    btn.innerText = "Watch Next Ad";
                }
            }, 3000);
        };

        function resetAdUI() {
            document.getElementById('adProgress').classList.add('hidden');
            document.getElementById('progressBar').style.width = "0%";
            document.getElementById('watchAdBtn').disabled = false;
            document.getElementById('watchAdBtn').innerText = "Watch Ads to Earn Stars";
        }
    </script>
</body>
</html>

