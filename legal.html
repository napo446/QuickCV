<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Legal Center | QuickCV Enterprise (PTY) LTD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .active-tab { border-bottom: 3px solid #2563eb; color: #2563eb; background-color: #eff6ff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .legal-card { background: white; border-radius: 1.5rem; border: 1px solid #e2e8f0; padding: 3rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        h2 { color: #1e293b; font-weight: 700; font-size: 1.5rem; margin-top: 2.5rem; margin-bottom: 1rem; border-left: 4px solid #2563eb; padding-left: 1rem; }
        h3 { color: #334155; font-weight: 600; font-size: 1.1rem; margin-top: 1.5rem; margin-bottom: 0.75rem; }
        p { color: #475569; line-height: 1.8; margin-bottom: 1.25rem; font-size: 0.95rem; }
        ul { margin-bottom: 1.5rem; list-style-type: disc; margin-left: 1.5rem; color: #475569; }
        li { margin-bottom: 0.5rem; }
        
        #legalGuard { background: rgba(7, 11, 20, 0.96); backdrop-filter: blur(12px); }
        .no-scroll { overflow: hidden; height: 100vh; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 no-scroll">

    <div id="legalGuard" class="fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] max-w-lg w-full p-10 shadow-2xl border border-blue-100">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mb-6 mx-auto rotate-12 shadow-xl shadow-blue-200">
                    <i class="fas fa-gavel text-white text-3xl"></i>
                </div>
                <h2 class="text-3xl font-black !border-0 !p-0 !mt-0 mb-2">Binding Agreement</h2>
                <p class="text-slate-500 text-sm">To protect our startup sustainability, you must acknowledge these terms before using QuickCV services.</p>
            </div>
            
            <div class="space-y-4 mb-8">
                <label class="flex items-start gap-4 p-5 bg-slate-50 rounded-2xl cursor-pointer border-2 border-transparent hover:border-blue-200 transition-all">
                    <input type="checkbox" id="checkRefund" class="mt-1 w-6 h-6 rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase text-blue-600 tracking-widest">Section 2.1</span>
                        <span class="text-xs font-bold text-slate-700 leading-tight">I ACCEPT THERE ARE <span class="text-red-600 underline">STRICTLY NO REFUNDS</span> FOR DIGITAL CREDITS.</span>
                    </div>
                </label>
                <label class="flex items-start gap-4 p-5 bg-slate-50 rounded-2xl cursor-pointer border-2 border-transparent hover:border-blue-200 transition-all">
                    <input type="checkbox" id="checkLiability" class="mt-1 w-6 h-6 rounded border-slate-300 text-blue-600 focus:ring-blue-500">
                    <div class="flex flex-col">
                        <span class="text-[10px] font-black uppercase text-blue-600 tracking-widest">Section 4.3</span>
                        <span class="text-xs font-bold text-slate-700 leading-tight">I WAIVE ALL RIGHTS TO SUE OR TAKE LEGAL ACTION REGARDING SOFTWARE ACCURACY.</span>
                    </div>
                </label>
            </div>

            <button onclick="confirmAgreement()" id="agreeBtn" disabled class="w-full py-5 bg-slate-200 text-slate-400 font-black rounded-2xl uppercase tracking-[0.2em] text-xs transition-all cursor-not-allowed">I Agree to All Terms</button>
        </div>
    </div>

    <nav class="bg-white/80 backdrop-blur-md border-b sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 h-20 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200">
                    <i class="fas fa-file-contract text-white text-lg"></i>
                </div>
                <div class="text-2xl font-black tracking-tighter text-slate-900">Quick<span class="text-blue-600">CV</span></div>
            </div>
            <a href="javascript:history.back()" class="flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-blue-600 transition group">
                <i class="fas fa-arrow-left group-hover:-translate-x-1 transition"></i>
                Return to Application
            </a>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto px-6 py-16">
        <div class="text-center mb-16">
            <span class="text-blue-600 font-bold text-xs uppercase tracking-[0.3em] mb-4 block">Compliance & Protection</span>
            <h1 class="text-4xl md:text-5xl font-black text-slate-900 mb-4 tracking-tight">Legal Center</h1>
            <p class="text-slate-500">Document Revision: v3.2 (Combined Shield) | Effective: January 2026</p>
        </div>

        <div class="flex flex-wrap justify-center border-b border-slate-200 mb-12 bg-white rounded-2xl p-1 shadow-sm">
            <button onclick="openTab(event, 'terms')" class="tab-link active-tab flex-1 px-8 py-4 font-bold text-[10px] tracking-widest uppercase transition-all rounded-xl">Terms of Service</button>
            <button onclick="openTab(event, 'privacy')" class="tab-link flex-1 px-8 py-4 font-bold text-[10px] tracking-widest uppercase text-slate-400 transition-all rounded-xl">Privacy (POPIA)</button>
            <button onclick="openTab(event, 'disclaimer')" class="tab-link flex-1 px-8 py-4 font-bold text-[10px] tracking-widest uppercase text-slate-400 transition-all rounded-xl">Liability Shield</button>
        </div>

        <div id="terms" class="tab-content active animate-fade-in">
            <div class="legal-card">
                <h2 class="!mt-0">1. Startup Acknowledgement</h2>
                <p>QuickCV is a <strong>private startup project</strong> currently in its learning and development phase. By using this service, you acknowledge that the developer is not an expert and the service is provided "as is" without any warranty of perfection.</p>
                
                <h2>2. Non-Refundable Credits</h2>
                <p>All credit purchases (R5 Starter / R50 Professional) are final. Under Section 42(2) of the South African ECT Act, digital content and services are exempt from refunds once the transaction is complete and access is granted.</p>

                <h2>3. Usage Limitations</h2>
                <p>You may use this tool for personal job applications. Commercial resale of documents generated here is strictly prohibited without written consent from QuickCV Enterprise (PTY) LTD.</p>
            </div>
        </div>

        <div id="privacy" class="tab-content animate-fade-in">
            <div class="legal-card">
                <div class="bg-blue-50 border-l-4 border-blue-600 p-6 mb-8 rounded-r-xl">
                    <p class="text-blue-900 font-bold mb-0 uppercase text-xs tracking-wider">POPIA Compliance Statement</p>
                    <p class="text-blue-800 text-xs mb-0 italic">This policy complies with the Protection of Personal Information Act No. 4 of 2013.</p>
                </div>
                <h2 class="!mt-0">Data Collection</h2>
                <p>We collect phone numbers for authentication and professional history for document generation. We do not sell your data to third parties. We only share metadata with our Career Hub partners (Indeed/Adzuna) if you choose to click their links.</p>
            </div>
        </div>

        <div id="disclaimer" class="tab-content animate-fade-in">
            <div class="legal-card">
                <h2 class="!mt-0 text-red-600 border-red-600">Irrevocable Liability Shield</h2>
                <h3>1. Waiver of Legal Action</h3>
                <p>You expressly waive any right to sue, initiate class-action lawsuits, or file criminal complaints against QuickCV Enterprise (PTY) LTD or its individual developers for software bugs, inaccuracies, or missed employment opportunities.</p>

                <h3>2. No Job Guarantee</h3>
                <p>QuickCV is a formatting tool. We are not a recruitment agency. We do not guarantee that your CV will pass ATS systems or result in an interview.</p>

                <div class="mt-12 p-8 bg-red-50 border border-red-100 rounded-[2rem]">
                    <p class="text-red-700 font-black text-sm uppercase tracking-widest mb-2 text-center">Final Warning</p>
                    <p class="text-red-600 text-xs text-center leading-relaxed">By clicking "Agree" and purchasing credits, you enter into a legally binding contract under South African law that prevents you from seeking damages for software inaccuracies.</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white border-t py-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <p class="text-[10px] text-slate-400 font-bold tracking-[0.2em] uppercase">QuickCV Enterprise (PTY) LTD | Registered in South Africa</p>
        </div>
    </footer>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBcp0fkuwhOOyO7fgAlbCoftWwkuog-vwQ",
        authDomain: "quickcv-47c99.firebaseapp.com",
        projectId: "quickcv-47c99",
        storageBucket: "quickcv-47c99.firebasestorage.app",
        messagingSenderId: "541347686112",
        appId: "1:541347686112:web:b821dd7213ab8674959285"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const checkRefund = document.getElementById('checkRefund');
    const checkLiability = document.getElementById('checkLiability');
    const agreeBtn = document.getElementById('agreeBtn');

    function checkInputs() {
        if (checkRefund.checked && checkLiability.checked) {
            agreeBtn.disabled = false;
            agreeBtn.classList.replace('bg-slate-200', 'bg-blue-600');
            agreeBtn.classList.replace('text-slate-400', 'text-white');
            agreeBtn.classList.remove('cursor-not-allowed');
        } else {
            agreeBtn.disabled = true;
            agreeBtn.classList.replace('bg-blue-600', 'bg-slate-200');
            agreeBtn.classList.replace('text-white', 'text-slate-400');
            agreeBtn.classList.add('cursor-not-allowed');
        }
    }

    checkRefund.addEventListener('change', checkInputs);
    checkLiability.addEventListener('change', checkInputs);

    // THE KEY FIX: Update Firebase, not just LocalStorage
    window.confirmAgreement = async () => {
        const user = auth.currentUser;
        if (!user) {
            alert("You must be logged in to accept terms. Redirecting to login...");
            window.location.href = "user.html"; // Send them back to log in
            return;
        }

        try {
            agreeBtn.innerText = "Processing...";
            const userRef = doc(db, "users", user.uid);
            await updateDoc(userRef, {
                legalAccepted: true
            });
            
            // Now it's saved in the cloud, we can go back
            window.location.href = "user.html"; 
        } catch (error) {
            console.error("Error updating legal status:", error);
            alert("Failed to save agreement. Please try again.");
        }
    };

    // Tab logic
    window.openTab = (evt, tabName) => {
        let i, tabContent, tabLinks;
        tabContent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabContent.length; i++) { tabContent[i].style.display = "none"; }
        tabLinks = document.getElementsByClassName("tab-link");
        for (i = 0; i < tabLinks.length; i++) {
            tabLinks[i].classList.remove("active-tab", "bg-blue-50");
            tabLinks[i].classList.add("text-slate-400");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.classList.add("active-tab", "bg-blue-50");
        evt.currentTarget.classList.remove("text-slate-400");
    }
</script>


</body>
</html>



